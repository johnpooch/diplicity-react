# Generated by generate_variant_migrations.py on 2025-10-24 22:24:01

from django.db import migrations


def add_hundred_provinces(apps, schema_editor):
    Variant = apps.get_model("variant", "Variant")
    Province = apps.get_model("province", "Province")

    hundred_variant = Variant.objects.get(id="hundred")

    provinces_data = [{'id': 'brt', 'name': 'Brittany', 'type': 'coastal', 'supply_center': True}, {'id': 'cal', 'name': 'Calais', 'type': 'coastal', 'supply_center': True}, {'id': 'dau', 'name': 'Dauphine', 'type': 'land', 'supply_center': True}, {'id': 'pro', 'name': 'Provence', 'type': 'coastal', 'supply_center': False}, {'id': 'cha', 'name': 'Charlerois', 'type': 'land', 'supply_center': False}, {'id': 'brs', 'name': 'Bristol Channel', 'type': 'sea', 'supply_center': False}, {'id': 'iri', 'name': 'Irish Sea', 'type': 'sea', 'supply_center': False}, {'id': 'eng', 'name': 'English Channel', 'type': 'sea', 'supply_center': False}, {'id': 'lon', 'name': 'London', 'type': 'coastal', 'supply_center': True}, {'id': 'poi', 'name': 'Poitou', 'type': 'land', 'supply_center': False}, {'id': 'nos', 'name': 'North Sea', 'type': 'sea', 'supply_center': False}, {'id': 'ang', 'name': 'Anglia', 'type': 'coastal', 'supply_center': False}, {'id': 'min', 'name': 'Minch', 'type': 'sea', 'supply_center': False}, {'id': 'lim', 'name': 'Limousin', 'type': 'land', 'supply_center': False}, {'id': 'ara/nc', 'name': 'Aragon (NC)', 'type': 'named_coast', 'supply_center': False}, {'id': 'ara/sc', 'name': 'Aragon (SC)', 'type': 'named_coast', 'supply_center': False}, {'id': 'ara', 'name': 'Aragon', 'type': 'land', 'supply_center': False}, {'id': 'thw', 'name': 'The Wash', 'type': 'sea', 'supply_center': False}, {'id': 'guy', 'name': 'Guyenne', 'type': 'coastal', 'supply_center': True}, {'id': 'nom', 'name': 'Normandy', 'type': 'coastal', 'supply_center': True}, {'id': 'sav', 'name': 'Savoy', 'type': 'coastal', 'supply_center': False}, {'id': 'sco', 'name': 'Scotland', 'type': 'coastal', 'supply_center': True}, {'id': 'dev', 'name': 'Devon', 'type': 'coastal', 'supply_center': True}, {'id': 'wal', 'name': 'Wales', 'type': 'coastal', 'supply_center': False}, {'id': 'anj', 'name': 'Anjou', 'type': 'land', 'supply_center': False}, {'id': 'par', 'name': 'Paris', 'type': 'land', 'supply_center': True}, {'id': 'lux', 'name': 'Luxembourg', 'type': 'land', 'supply_center': True}, {'id': 'can', 'name': 'Cantons', 'type': 'land', 'supply_center': True}, {'id': 'lor', 'name': 'Lorraine', 'type': 'land', 'supply_center': False}, {'id': 'dij', 'name': 'Dijon', 'type': 'land', 'supply_center': True}, {'id': 'fri', 'name': 'Friesland', 'type': 'coastal', 'supply_center': False}, {'id': 'not/wc', 'name': 'Northumbria (WC)', 'type': 'named_coast', 'supply_center': False}, {'id': 'not', 'name': 'Northumbria', 'type': 'land', 'supply_center': False}, {'id': 'not/ec', 'name': 'Northumbria (EC)', 'type': 'named_coast', 'supply_center': False}, {'id': 'fla', 'name': 'Flanders', 'type': 'coastal', 'supply_center': True}, {'id': 'med', 'name': 'Mediterranean', 'type': 'sea', 'supply_center': False}, {'id': 'bis', 'name': 'Biscay', 'type': 'sea', 'supply_center': False}, {'id': 'str', 'name': 'Strait of Dover', 'type': 'sea', 'supply_center': False}, {'id': 'orl', 'name': 'Orleanais', 'type': 'land', 'supply_center': True}, {'id': 'tou', 'name': 'Toulouse', 'type': 'coastal', 'supply_center': True}, {'id': 'hol', 'name': 'Holland', 'type': 'coastal', 'supply_center': True}, {'id': 'als', 'name': 'Alsace', 'type': 'land', 'supply_center': False}, {'id': 'atl', 'name': 'Atlantic Sea', 'type': 'sea', 'supply_center': False}, {'id': 'cas', 'name': 'Castile', 'type': 'coastal', 'supply_center': True}, {'id': 'thp', 'name': 'The Pale', 'type': 'coastal', 'supply_center': False}]
    named_coast_parents = {'ara/nc': 'ara', 'ara/sc': 'ara', 'not/wc': 'not', 'not/ec': 'not'}

    # Create all provinces first
    for province_data in provinces_data:
        Province.objects.create(
            province_id=province_data["id"],
            name=province_data["name"],
            type=province_data["type"],
            supply_center=province_data["supply_center"],
            variant=hundred_variant,
        )

    # Set up named coast parent relationships
    for named_coast_id, parent_id in named_coast_parents.items():
        named_coast = Province.objects.get(variant=hundred_variant, province_id=named_coast_id)
        parent = Province.objects.get(variant=hundred_variant, province_id=parent_id)
        named_coast.parent = parent
        named_coast.save()


def remove_hundred_provinces(apps, schema_editor):
    Variant = apps.get_model("variant", "Variant")
    Province = apps.get_model("province", "Province")

    hundred_variant = Variant.objects.get(id="hundred")
    Province.objects.filter(variant=hundred_variant).delete()


class Migration(migrations.Migration):

    dependencies = [
        ("province", "0009_set_named_coast_parents_italy_vs_germany"),
        ("variant", "0004_add_hundred_variant"),
    ]

    operations = [
        migrations.RunPython(
            add_hundred_provinces,
            remove_hundred_provinces,
        ),
    ]
